<link rel="stylesheet" href="modules/spha/css/spha.css">
<!-- PAGE: spha/html/payback/sphaSummaryData.html -->
<div class="panel spha" ng-cloak>
    <div class="panel-header text-uppercase pb10">
        <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <h4>
                    {{ ctrl.queryType | translate }}
                </h4>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div class="text-right" style="padding-right:15px;">
                    <button type="button" class="btn btn-default" id="back-button-top" ng-click="ctrl.goBack()">
                        {{'BACK' | translate}}
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="ctrl.tables"  class="panel-body">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div ng-class="ctrl.alertClass" ng-show="ctrl.message">
                    <strong translate="{{ctrl.message | translate}}"></strong>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <form xt-form ng-submit="submitSearch()" name="filtersForm" novalidate>
                    <spha-filter-payback
                        ng-if="ctrl.shareDataPrefix"
                        data="ctrl.filtersDirective"
                        procedure="ctrl.procedureDTO"
                        share-data-prefix="ctrl.shareDataPrefix"
                        locked-mode="ctrl.lockedMode"
                        filters-form="filtersForm"
                        set-reset-fn="setResetFn(resetFn)">
                    </spha-filter-payback>
                    <br/>
                    <div class="text-right">
                        <button type="button"
                                class="btn btn-primary text-uppercase"
                                id="reset-button"
                                ng-click="reset()"
                                translate="{{'RESET' | translate}}">
                        </button>
                        <button type="submit"
                                class="btn btn-primary text-uppercase"
                                translate="{{'SEARCH' | translate}}"
                                id="save-button"
                                ng-disabled="filtersForm.$invalid">
                        </button>
                    </div>
                    <br/>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="row">
                    <div ng-if="ctrl.tables && ctrl.shareDataPrefix && ctrl.filtersDirective && ctrl.filtersDirective !== {} && ctrl.filtersLoaded"
                         ng-repeat="(tableName, table) in ctrl.tables">
                        <spha-table-payback
                                table="table"
                                filters="ctrl.createFilterCriteria"
                                index="$index"
                                table-name="tableName"
                                get-data="ctrl.getData">
                        </spha-table-payback>
                    </div>
                </div>
                <div class="text-left">
					<span translate="{{ 'REPORT_NOTE' | translate}}" ></span>
				</div>
                <div class = "text-right">
                    <button type="submit"
                            class="btn btn-primary"
                            translate="{{'EXPORT' | translate}}"
                            ng-click="ctrl.exportReport(filtersForm)"
                            ng-disabled="filtersForm.$invalid" >
                    </button>
                </div>
                <br/>
        
                <div class="text-right">
                    <button type="button"
                            class="btn btn-default"
                            id="top-button"
                            ng-click="ctrl.goToTop()">
                        {{'GO_TO_TOP' | translate}}
                    </button>
                    <button type="button" id="back-button-bottom" class="btn btn-default" ng-click="ctrl.goBack()">
                        {{'BACK' | translate}}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
		